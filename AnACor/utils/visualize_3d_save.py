import numpy as np
import open3d as o3d
import pdb 

def numpy_array_to_o3d_point_cloud(array):
    # Extract the indices of all non-zero values (i.e., 1, 2, or 3)
    points = np.argwhere(array > 0)
    
    # Initialize a point cloud object
    pcd = o3d.geometry.PointCloud()
    
    # Convert the indices to Open3D Vector3dVector format
    pcd.points = o3d.utility.Vector3dVector(points)
    
    # Initialize an empty list for colors
    colors = []
    
    # Assign colors based on the array values (1: blue, 2: yellow, 3: red)
    for point in points:
        if array[tuple(point)] == 1:
            colors.append([0, 0, 1])  # Blue
        elif array[tuple(point)] == 2:
            colors.append([1, 1, 0])  # Yellow
        elif array[tuple(point)] == 3:
            colors.append([1, 0, 0])  # Red
    
    # Set the colors of the point cloud
    pcd.colors = o3d.utility.Vector3dVector(colors)
    pdb.set_trace()
    return pcd


img=np.load('D:/lys/studystudy/phd/0-Project_absorption_correction/Code_0_for_absorption_correction/ac/test_.npy')
# Define the path as given in your coordinates
numpy_array_to_o3d_point_cloud(img)
path = [(274, 546, 382), (273, 545, 382), (273, 544, 383), (273, 543, 383), (273, 542, 384), (273, 541, 384), (273, 540, 385), (273, 539, 386), (273, 538, 386), (273, 537, 387), (273, 536, 387), (273, 535, 388), (273, 534, 388), (273, 533, 389), (273, 532, 390), (273, 531, 390), (273, 530, 391), (273, 529, 391), (273, 528, 392), (273, 527, 392), (273, 526, 393), (273, 525, 394), (273, 524, 394), (273, 523, 395), (273, 522, 395), (273, 521, 396), (273, 520, 396), (273, 519, 397), (273, 518, 398), (273, 517, 398), (273, 516, 399), (273, 515, 399), (273, 514, 400), (273, 513, 401), (273, 512, 401), (273, 511, 402), (273, 510, 402), (273, 509, 403), (273, 508, 403), (273, 507, 404), (273, 506, 405), (273, 505, 405), (273, 504, 406), (273, 503, 406), (273, 502, 407), (273, 501, 407), (273, 500, 408), (273, 499, 409), (273, 498, 409), (273, 497, 410), (273, 496, 410), (273, 495, 411), (273, 494, 411), (273, 493, 412), (273, 492, 413), (273, 491, 413), (273, 490, 414), (273, 489, 414), (273, 488, 415), (273, 487, 415), (273, 486, 416), (273, 485, 417), (273, 484, 417), (273, 483, 418), (273, 482, 418), (273, 481, 419), (273, 480, 420), (273, 479, 420), (273, 478, 421), (273, 477, 421), (273, 476, 422), (273, 475, 422), (273, 474, 423), (273, 473, 424), (273, 472, 424), (273, 471, 425), (273, 470, 425), (273, 469, 426), (273, 468, 426), (273, 467, 427), (273, 466, 428), (273, 465, 428), (273, 464, 429), (273, 463, 429), (273, 462, 430), (273, 461, 430), (273, 460, 431), (273, 459, 432), (273, 458, 432), (273, 457, 433), (273, 456, 433), (273, 455, 434), (273, 454, 434), (273, 453, 435), (273, 452, 436), (273, 451, 436), (273, 450, 437), (273, 449, 437), (273, 448, 438), (273, 447, 439), (273, 446, 439), (273, 445, 440), (273, 444, 440), (273, 443, 441), (273, 442, 441), (273, 441, 442), (273, 440, 443), (273, 439, 443), (273, 438, 444), (273, 437, 444), (273, 436, 445), (273, 435, 445), (273, 434, 446), (273, 433, 447), (273, 432, 447), (273, 431, 448), (273, 430, 448), (273, 429, 449), (273, 428, 449), (273, 427, 450), (273, 426, 451), (273, 425, 451), (273, 424, 452), (273, 423, 452), (273, 422, 453), (273, 421, 454), (273, 420, 454), (273, 419, 455), (273, 418, 455), (273, 417, 456), (273, 416, 456), (273, 415, 457), (273, 414, 458), (273, 413, 458), (273, 412, 459), (273, 411, 459), (273, 410, 460), (273, 409, 460), (273, 408, 461), (273, 407, 462), (273, 406, 462), (273, 405, 463), (273, 404, 463), (273, 403, 464), (273, 402, 464), (273, 401, 465), (273, 400, 466), (273, 399, 466), (273, 398, 467), (273, 397, 467), (273, 396, 468), (273, 395, 468), (273, 394, 469), (273, 393, 470), (273, 392, 470), (273, 391, 471), (273, 390, 471), (273, 389, 472), (273, 388, 473), (273, 387, 473), (273, 386, 474), (273, 385, 474), (273, 384, 475), (273, 383, 475), (273, 382, 476), (273, 381, 477), (273, 380, 477), (273, 379, 478), (273, 378, 478), (273, 377, 479), (273, 376, 479), (273, 375, 480), (273, 374, 481), (273, 373, 481), (273, 372, 482), (273, 371, 482), (273, 370, 483), (273, 369, 483), (273, 368, 484), (273, 367, 485), (273, 366, 485), (273, 365, 486), (273, 364, 486), (273, 363, 487), (273, 362, 487), (273, 361, 488), (273, 360, 489), (273, 359, 489), (273, 358, 490), (273, 357, 490), (273, 356, 491), (273, 355, 492), (273, 354, 492), (273, 353, 493), (273, 352, 493), (273, 351, 494), (273, 350, 494), (273, 349, 495), (273, 348, 496), (273, 347, 496), (273, 346, 497), (273, 345, 497), (273, 344, 498), (273, 343, 498), (273, 342, 499), (273, 341, 500), (273, 340, 500), (273, 339, 501), (273, 338, 501), (273, 337, 502), (273, 336, 502), (273, 335, 503), (273, 334, 504), (273, 333, 504), (273, 332, 505), (273, 331, 505), (273, 330, 506), (273, 329, 507), (273, 328, 507), (273, 327, 508), (273, 326, 508), (273, 325, 509), (273, 324, 509), (273, 323, 510), (273, 322, 511), (273, 321, 511), (273, 320, 512), (273, 319, 512), (273, 318, 513), (273, 317, 513), (273, 316, 514), (273, 315, 515), (273, 314, 515), (273, 313, 516), (273, 312, 516), (273, 311, 517), (273, 310, 517), (273, 309, 518), (273, 308, 519), (273, 307, 519), (273, 306, 520), (273, 305, 520), (273, 304, 521), (273, 303, 521), (273, 302, 522), (273, 301, 523), (273, 300, 523), (273, 299, 524), (273, 298, 524), (273, 297, 525), (273, 296, 526), (273, 295, 526), (273, 294, 527), (273, 293, 527), (273, 292, 528), (273, 291, 528), (273, 290, 529), (273, 289, 530), (273, 288, 530), (273, 287, 531), (273, 286, 531), (273, 285, 532), (273, 284, 532), (273, 283, 533), (273, 282, 534), (273, 281, 534), (273, 280, 535), (273, 279, 535), (273, 278, 536), (273, 277, 536), (273, 276, 537), (273, 275, 538), (273, 274, 538), (273, 273, 539), (273, 272, 539), (273, 271, 540), (273, 270, 540), (273, 269, 541), (273, 268, 542), (273, 267, 542), (273, 266, 543), (273, 265, 543), (273, 264, 544), (273, 263, 545), (273, 262, 545), (273, 261, 546), (273, 260, 546), (273, 259, 547), (273, 258, 547), (273, 257, 548), (273, 256, 549), (273, 255, 549), (273, 254, 550), (273, 253, 550), (273, 252, 551), (273, 251, 551), (273, 250, 552), (273, 249, 553), (273, 248, 553), (273, 247, 554), (273, 246, 554), (273, 245, 555), (273, 244, 555), (273, 243, 556), (273, 242, 557), (273, 241, 557), (273, 240, 558), (273, 239, 558), (273, 238, 559), (273, 237, 559), (273, 236, 560), (273, 235, 561), (273, 234, 561), (273, 233, 562), (273, 232, 562), (273, 231, 563), (273, 230, 564), (273, 229, 564), (273, 228, 565), (273, 227, 565), (273, 226, 566), (273, 225, 566), (273, 224, 567), (273, 223, 568), (273, 222, 568), (273, 221, 569), (273, 220, 569), (273, 219, 570), (273, 218, 570), (273, 217, 571), (273, 216, 572), (273, 215, 572), (273, 214, 573), (273, 213, 573), (273, 212, 574), (273, 211, 574), (273, 210, 575), (273, 209, 576), (273, 208, 576), (273, 207, 577), (273, 206, 577), (273, 205, 578), (273, 204, 579), (273, 203, 579), (273, 202, 580), (273, 201, 580), (273, 200, 581), (273, 199, 581), (273, 198, 582), (273, 197, 583), (273, 196, 583), (273, 195, 584), (273, 194, 584), (273, 193, 585), (273, 192, 585), (273, 191, 586), (273, 190, 587), (273, 189, 587), (273, 188, 588), (273, 187, 588), (273, 186, 589), (273, 185, 589), (273, 184, 590), (273, 183, 591), (273, 182, 591), (273, 181, 592), (273, 180, 592), (273, 179, 593), (273, 178, 593), (273, 177, 594), (273, 176, 595), (273, 175, 595), (273, 174, 596), (273, 173, 596), (273, 172, 597), (273, 171, 598), (273, 170, 598), (273, 169, 599), (273, 168, 599), (273, 167, 600), (273, 166, 600), (273, 165, 601), (273, 164, 602), (273, 163, 602), (273, 162, 603), (273, 161, 603), (273, 160, 604), (273, 159, 604), (273, 158, 605), (273, 157, 606), (273, 156, 606), (273, 155, 607), (273, 154, 607), (273, 153, 608), (273, 152, 608), (273, 151, 609), (273, 150, 610), (273, 149, 610), (273, 148, 611), (273, 147, 611), (273, 146, 612), (273, 145, 612), (273, 144, 613), (273, 143, 614), (273, 142, 614), (273, 141, 615), (273, 140, 615), (273, 139, 616), (273, 138, 617), (273, 137, 617), (273, 136, 618), (273, 135, 618), (273, 134, 619), (273, 133, 619), (273, 132, 620), (273, 131, 621), (273, 130, 621), (273, 129, 622), (273, 128, 622), (273, 127, 623), (273, 126, 623), (273, 125, 624), (273, 124, 625), (273, 123, 625), (273, 122, 626), (273, 121, 626), (273, 120, 627), (273, 119, 627), (273, 118, 628), (273, 117, 629), (273, 116, 629), (273, 115, 630), (273, 114, 630), (273, 113, 631), (273, 112, 632), (273, 111, 632), (273, 110, 633), (273, 109, 633), (273, 108, 634), (273, 107, 634), (273, 106, 635), (273, 105, 636), (273, 104, 636), (273, 103, 637), (273, 102, 637), (273, 101, 638), (273, 100, 638), (273, 99, 639), (273, 98, 640), (273, 97, 640), (273, 96, 641), (273, 95, 641), (273, 94, 642), (273, 93, 642), (273, 92, 643), (273, 91, 644), (273, 90, 644), (273, 89, 645), (273, 88, 645), (273, 87, 646), (273, 86, 646), (273, 85, 647), (273, 84, 648), (273, 83, 648), (273, 82, 649), (273, 81, 649), (273, 80, 650), (273, 79, 651), (273, 78, 651), (273, 77, 652), (273, 76, 652), (273, 75, 653), (273, 74, 653), (273, 73, 654), (273, 72, 655), (273, 71, 655), (273, 70, 656), (273, 69, 656), (273, 68, 657), (273, 67, 657), (273, 66, 658), (273, 65, 659), (273, 64, 659), (273, 63, 660), (273, 62, 660), (273, 61, 661), (273, 60, 661), (273, 59, 662), (273, 58, 663), (273, 57, 663), (273, 56, 664), (273, 55, 664), (273, 54, 665), (273, 53, 665), (273, 52, 666), (273, 51, 667), (273, 50, 667), (273, 49, 668), (273, 48, 668), (273, 47, 669), (273, 46, 670), (273, 45, 670), (273, 44, 671), (273, 43, 671), (273, 42, 672), (273, 41, 672), (273, 40, 673), (273, 39, 674), (273, 38, 674), (273, 37, 675), (273, 36, 675), (273, 35, 676), (273, 34, 676), (273, 33, 677), (273, 32, 678), (273, 31, 678), (273, 30, 679), (273, 29, 679), (273, 28, 680), (273, 27, 680), (273, 26, 681), (273, 25, 682), (273, 24, 682), (273, 23, 683), (273, 22, 683), (273, 21, 684), (273, 20, 684), (273, 19, 685), (273, 18, 686), (273, 17, 686), (273, 16, 687), (273, 15, 687), (273, 14, 688), (273, 13, 689), (273, 12, 689), (273, 11, 690), (273, 10, 690), (273, 9, 691), (273, 8, 691), (273, 7, 692), (273, 6, 693), (273, 5, 693), (273, 4, 694), (273, 3, 694), (273, 2, 695), (273, 1, 695), (273, 0, 696)]


